<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Hegarty&family=Offside&family=Rajdhani:wght@300;400;500;600;700&family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
  <title>PepesMachine</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="mainCanvasContainer">
  <!-- Replaced textual title with logo image from static/Nome.png -->
  <!-- Logo image served from ./static/Nome.png -> available at /static/Nome.png -->
  <img id="logo" src="/static/Nome.png" alt="PEPESMACHINE" style="max-width:60vw; height:auto; display:block; margin:18px auto;">
  <!-- Top toolbar (mobile only): palette on the left, Size tab on the right -->
  <div id="topToolbar" role="toolbar" aria-label="Top controls">
    <div id="paletteBarMobile" role="group" aria-label="Color palette">
      <span id="buttonInputsMobile"></span>
    </div>
    <div id="showSettingsTabMobile">
      <span style="font-size:1.3em;"></span> Size
    </div>
  </div>
  <!-- Small handle to reveal top toolbar on mobile -->
  <div id="topToolbarHandle" title="Show tools" aria-hidden="true"></div>
  <!-- Zoom slider (replaces the image-based potentiometer) -->
  <!-- Moved into the controls bar below; this block is intentionally removed here. -->
    <div id="patternArea">
      <!-- Desktop palette bar above canvas -->
      <div id="paletteBarDesktop" role="group" aria-label="Color palette">
        <span id="buttonInputsDesktop"></span>
      </div>
      <canvas id="patternCanvas"></canvas>
      <!-- Overlay canvas for selection visualization -->
      <canvas id="overlayCanvas" style="position:absolute; left:0; top:0; pointer-events:none;"></canvas>
      <!-- Fixed shape switch under the pattern area -->
      <!-- Fixed zoom slider at the top-right of the pattern area -->
      <div id="zoomBar" aria-label="Zoom">
          <input type="range" id="knob_down" name="knob_down" min="1" max="100" step="1">
      </div>
      <!-- Small handle to reveal zoom on mobile -->
      <div id="zoomHandle" title="Show zoom" aria-hidden="true"></div>
    </div>
    <div id="controls">
      <div class="btn-row-grid">
        <button id="backBtn" disabled>&#8592; Go Back</button>
        <div class="center-group">
          <button id="generateBtn">Generate New Pattern</button>
          <div id="genIndicator" class="gen-indicator hidden" aria-live="polite" aria-atomic="true">
            <span class="spinner" aria-hidden="true"></span>
            <span>Generating‚Ä¶</span>
          </div>
        </div>
        <button id="forwardBtn" disabled>Go Forward &#8594;</button>
      </div>
      <div class="btn-row">
        <button id="magicWandBtn" title="Select two tiles to fill a rectangular region">‚ú® Magic Wand</button>
        <button id="recolorAllBtn" title="Recolor all regions using active palette">üé® Recolor All</button>
        <button id="printBtn">üñ®Ô∏è Print Instructions</button>
      </div>
      <!-- Shape selector moved into controls as the last row -->
      <div id="shapeBar" role="group" aria-label="Shape selector" class="btn-row">
        <span class="switch-group">
          <input type="radio" id="switch_left" class="switch-radio" name="switch" value="left">
          <label for="switch_left" class="switch-option" title="Squares">‚¨õ Squares</label>
          <input type="radio" id="switch_center" class="switch-radio" name="switch" value="center">
          <label for="switch_center" class="switch-option" title="Mix">üîÄ Mix</label>
          <input type="radio" id="switch_right" class="switch-radio" name="switch" value="right">
          <label for="switch_right" class="switch-option" title="Triangles">‚ñ≥ Triangles</label>
        </span>
      </div>
      <!-- Main inputs moved to pattern area (palette, shape, zoom) -->
    </div>
    <!-- Small handle to reveal hidden controls on mobile -->
    <div id="controlsHandle" title="Show controls" aria-hidden="true"></div>
  </div>
  <!-- Desktop Size tab (separate button) -->
  <div id="showSettingsTab">
    <span style="font-size:1.3em;"></span> Size
  </div>
  <div id="settingsOverlay">
    <div id="settingsPanel">
      <button id="closeSettingsBtn" aria-label="Close settings" title="Close">‚úï</button>
      <form id="settingsForm" class="form-section">
        <div class="form-row">
          <label for="canvas_width">Canvas Width (cm):</label>
          <input type="number" id="canvas_width" name="canvas_width" min="1" max="90000" step="1" required>
        </div>
        <div class="form-row">
          <label for="canvas_height">Canvas Height (cm):</label>
          <input type="number" id="canvas_height" name="canvas_height" min="1" max="90000" step="1" required>
        </div>
        <!-- Removed the Save Settings button -->
      </form>
    </div>
  </div>
  <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>
  <script src="/static/app.js"></script>
</body>
</html>