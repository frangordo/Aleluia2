<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Hegarty&family=Offside&family=Rajdhani:wght@300;400;500;600;700&family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
  <title>PepesMachine</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="mainCanvasContainer">
  <!-- Replaced textual title with logo image from static/Nome.png -->
  <!-- Logo image served from ./static/Nome.png -> available at /static/Nome.png -->
  <img id="logo" src="/static/Nome.png" alt="PEPESMACHINE" style="max-width:60vw; height:auto; display:block; margin:18px auto;">
  <!-- Potentiometer control (fixed on right) -->
  <div id="potentiometer" aria-hidden="false" title="Zoom">
    <img id="pot_back" src="/static/button_zoom_back.png" alt="pot-back">
    <img id="pot_front" src="/static/button_zoom_front.png" alt="pot-front">
    <div id="pot_value" aria-hidden="true" style="display:none"></div>
  </div>
    <div id="patternArea">
      <canvas id="patternCanvas"></canvas>
      <!-- Overlay canvas for selection visualization -->
      <canvas id="overlayCanvas" style="position:absolute; left:0; top:0; pointer-events:none;"></canvas>
    </div>
    <div id="controls">
      <div class="btn-row">
        <button id="generateBtn">Generate New Pattern</button>
        <div id="genIndicator" class="gen-indicator hidden" aria-live="polite" aria-atomic="true">
          <span class="spinner" aria-hidden="true"></span>
          <span>Generating‚Ä¶</span>
        </div>
      </div>
      <div class="btn-row">
        <button id="backBtn" disabled>&#8592; Go Back</button>
        <button id="forwardBtn" disabled>Go Forward &#8594;</button>
        <button id="magicWandBtn" title="Select two tiles to fill a rectangular region">‚ú® Magic Wand</button>
        <button id="recolorAllBtn" title="Recolor all regions using active palette">üé® Recolor All</button>
        <button id="printBtn">üñ®Ô∏è Print Instructions</button>
      </div>
    </div>
    <!-- Small handle to reveal hidden controls on mobile -->
    <div id="controlsHandle" title="Show controls" aria-hidden="true"></div>
  </div>
  <div id="showSettingsTab">
    <span style="font-size:1.3em;">&#9654;</span> PepesMachine
  </div>
  <div id="settingsOverlay">
    <div id="settingsPanel">
      <button id="closeSettingsBtn">&#8592; Back to Canvas</button>
      <form id="settingsForm" class="form-section">
        <div class="form-row">
          <label for="knob_down">Zoom:</label>
          <input type="range" id="knob_down" name="knob_down" min="1" max="10" step="1">
          <span id="zoomValue"></span>
        </div>
        <div class="form-row">
          <label for="slider">Slider:</label>
          <input type="range" id="slider" name="slider" min="0" max="100">
          <span id="sliderValue"></span>
        </div>
        <div class="form-row">
          <label>Switch:</label>
          <span class="switch-group">
            <input type="radio" id="switch_left" class="switch-radio" name="switch" value="left">
            <input type="radio" id="switch_center" class="switch-radio" name="switch" value="center">
            <input type="radio" id="switch_right" class="switch-radio" name="switch" value="right">
          </span>
        </div>
        <div class="form-row">
          <label for="canvas_width">Canvas Width:</label>
          <input type="number" id="canvas_width" name="canvas_width" min="10" max="900000" required>
        </div>
        <div class="form-row">
          <label for="canvas_height">Canvas Height:</label>
          <input type="number" id="canvas_height" name="canvas_height" min="10" max="900000" required>
        </div>
        <div class="button-row">
          <label>Buttons:</label>
          <div>
            <span id="buttonInputs"></span>
          </div>
        </div>
        <!-- Removed the Save Settings button -->
      </form>
    </div>
  </div>
  <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>
  <script src="/static/app.js"></script>
</body>
</html>